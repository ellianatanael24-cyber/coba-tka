<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Ujian TKA - Bagian 2</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    #timer {
      position: fixed; top: 10px; right: 20px;
      background: #333; color: #fff; padding: 10px 20px;
      border-radius: 8px; font-size: 18px;
    }
    #log {
      position: fixed; bottom: 10px; left: 10px;
      background: rgba(255,0,0,0.8); color: #fff;
      padding: 8px; font-size: 12px; border-radius: 5px;
      max-width: 200px;
    }
    iframe { width: 100%; height: 90vh; border: none; }
    .warning { background-color: red !important; color: white !important; }
  </style>
</head>
<body>
  <div id="timer">30:00</div>
  <div id="log">Log:</div>
  <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfGAmDCNs4vOaX55Vm08ilpRNgYk1N2xHDTBiHS-8QGkODi1g/viewform?embedded=true"></iframe>

<script>
let durasi = 30 * 60; // 30 menit
const timerEl = document.getElementById("timer");
const logEl = document.getElementById("log");

function updateTimer() {
  let menit = Math.floor(durasi / 60);
  let detik = durasi % 60;
  timerEl.textContent = `${menit}:${detik.toString().padStart(2,"0")}`;
  
  if (durasi === 300) {
    document.body.classList.add("warning");
    alert("⚠️ 5 menit tersisa! Segera selesaikan.");
  }
  if (durasi === 60) {
    alert("⏰ 1 menit terakhir! Segera submit jawaban!");
  }
  if (durasi <= 0) {
    alert("⏰ Waktu habis! Ujian berakhir.");
    window.location.href = "selesai.html";
  }
  durasi--;
}
setInterval(updateTimer, 1000);

// Deteksi pelanggaran
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    logEl.innerHTML += "<br>Pindah tab!";
  }
});
</script>
</body>
</html>
